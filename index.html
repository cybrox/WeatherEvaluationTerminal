<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	
	<meta name="author" content="Sven Marc 'cybrox' Gehring" />
	<meta name="copyright" content="2014 Sven Marc 'cybrox' Gehring" />

	<link href="assets/images/favicon.ico" type="image/x-icon" rel="shortcut icon" />
	<link href="assets/images/favicon.ico" type="image/x-icon" rel="icon" />

	<link href="assets/vendor/bootstrap.min.css" rel="stylesheet" />
	<link href="assets/stylesheets/application.css" rel="stylesheet" />

	<title>WET-Interface</title>
</head>
<body>

	<!-- Application template -->
	<script type="text/x-handlebars">
		<header class="clearfix">
			<h1 id="pagename">Wetterstation
			  {{#if hasWarnings}}
			  	{{#link-to 'notifications' id="notifications" class="pull-right btn btn-warning"}}
			    	<strong>{{newWarnings}} {{textWarnings}}</strong>
			  	{{/link-to}}
			  {{/if}}
			</h1>
		</header>
		<section id="content">
			{{outlet}}
		</section>
		<footer>
			<span id="copyright">
				Wetterstation 'Weather evaluation terminal', Entwicklungsprojekt EN11a. &bull;
				Webinterface written and copyrighted 2014+ by Sven Marc 'cybrox' Gehring.
			</span>
		</footer>
	</script>



	<!-- Page: "index" "/" -->
	<script type="text/x-handlebars" id="index">
		Loading recent weather data...
	</script>


	<!-- Page: "weather" "/weather/..." -->
	<script type="text/x-handlebars" id="weather">
		<h1 id="monthselect">
			<button {{action 'goPrev'}} class="btn btn-primary pull-left">&#xab; {{prevMonth}}</button>
			Wetterdaten Monatsansicht &bull; {{currentMonth}}
			<button {{action 'goNext'}} class="btn btn-primary pull-right">{{nextMonth}} &#xbb;</button>
		</h1>
		<section id="contentInner">
			<section id="monthview">
				<div class="doublewrapper">
					<div class="doublebox col-md-8">
						<div class="panel panel-default">
						  <div class="panel-heading">
						  	<span class="label label-primary show-blue">°C</span> Temperatur 
						  	<span class="label label-primary show-dark">mm/m3</span> Regenmenge
						  </div>
						  <div class="panel-body">
								{{graph-canvas type='Line' range='month' data=controller.datasetOne options=view.lineOptions}}
						  </div>
						</div>
					</div>
					<div class="doublebox col-md-4">
						<div class="panel panel-default">
						  <div class="panel-heading"><span class="label label-default">Tage</span> Windrichtung</div>
						  <div class="panel-body nopadd">
								{{graph-canvas type='Radar' range='direction' data=controller.datasetDir options=view.areaOptions}}
						  </div>
						</div>
					</div>
				</div>
				<div class="doublewrapper">
					<div class="doublebox col-md-8">
						<div class="panel panel-default">
						  <div class="panel-heading">
						  	<span class="label label-primary show-blue">km/h</span> Windstärke 
						  	<span class="label label-primary show-dark">%</span> Luftfeuchtigkeit
						  </div>
						  <div class="panel-body">
								{{graph-canvas type='Line' range='month' data=controller.datasetTwo options=view.lineOptions}}
						  </div>
						</div>
					</div>
					<div class="doublebox col-md-4">
						<div class="panel panel-default">
						  <div class="panel-heading">Durchschnttswerte</div>
						  <div class="panel-body nopadd">
								<table class="table table-striped">
									<tr><td>Temperatur</td><td>{{avgTm}}°C</td></tr>
									<tr><td>Regenmenge</td><td>{{avgRv}}mm/m3</td></tr>
									<tr><td>Windstärke</td><td>{{avgWs}}km/h</td></tr>
									<tr><td>Luftfeuchtigkeit</td><td>{{avgHm}}%</td></tr>
								</table>
						  </div>
						</div>
					</div>
				</div>
			</section>
		</section>
	</script>


	<!-- Page: "notifications" "/" -->
	<script type="text/x-handlebars" id="notifications">
		<h1 id="monthselect">Systemmeldungen</h1>
		<section id="contentInner">
			{{#link-to 'index' class="pull-left btn btn-primary surr"}}&#xab; Zurück zur Monatsansicht{{/link-to}}
			<p class="info textblock">
				Systemmeldungen werden von der Benutzeroberfläche der Wetterstation generiert,
				wenn die Station einen Ungültigen Wert zurückliefert. Dazu gehören Werte ausserhalb
				der angegebenen Messbereiche (zb. Windgeschwindigkeit > 100km/h) oder andere,
				aussergewöhnliche Ereignisse. Es empfiehlt sich, die Station beim vermehrten Auftreten
				von Systemmeldungen auf ihre Funktion zu überprüfen. Systemmeldungen können mit einem
				Klick auf den Ok! - Button als gelesen markiert werden.
			</p>
			<table class="table table-striped top-spacing">
				{{#each controller.content.data}}
					<tr>
						<td class="full-size"><span class="label label-warning">{{type}}</span> {{message}}</td>
						<td><button {{action 'markRead' id}} class="btn btn-xs btn-success">Ok!</button></td>
					</tr>
				{{else}}
					<tr><td>Keine anstehenden Systemmeldungen gefunden.</td></tr>
				{{/each}}
			</table>
		</section>
	</script>


	<script type="text/javascript" src="assets/vendor/jquery.min.js"></script>
	<script type="text/javascript" src="assets/vendor/handlebars.min.js"></script>
	<script type="text/javascript" src="assets/vendor/ember.min.js"></script>
	<script type="text/javascript" src="assets/vendor/chart.min.js"></script>
	<script type="text/javascript" src="assets/compiled/application.js"></script>
</body>
</html>